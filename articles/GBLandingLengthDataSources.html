<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landings and Length data sources • mskeyrun</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Landings and Length data sources">
<meta property="og:description" content="mskeyrun">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mskeyrun</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mskeyrun.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Data Needs</li>
    <li>
      <a href="../articles/DataNeeds.html">Project outline</a>
    </li>
    <li>
      <a href="../articles/DatasetDimensions.html">Dataset Dimensions</a>
    </li>
    <li>
      <a href="../articles/SpeciesEnvDat.html">Keyrun Species, Environment, Data Formats</a>
    </li>
    <li>
      <a href="../articles/CompsDat.html">Age, Length, Diet</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Georges Bank</li>
    <li>
      <a href="../articles/GBSurveySet.html">GB Survey Footprint</a>
    </li>
    <li>
      <a href="../articles/allocateLandingsEPU.html">Allocate Landings to GB</a>
    </li>
    <li>
      <a href="../articles/stockAreas.html">Stock areas</a>
    </li>
    <li>
      <a href="../articles/GBdietcomp.html">Focal species diets on GB</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Simulated Data</li>
    <li>
      <a href="../articles/SimData.html">Generating Simulated Data</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Assigning Fleets</li>
    <li>
      <a href="../articles/GBFleetDefinitions.html">Analysis of catch by gear</a>
    </li>
    <li>
      <a href="../articles/GBFleetDecisions.html">Fleet Definitions</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Length &amp; Age Based Data</li>
    <li>
      <a href="../articles/GBLandingLengthDataSources.html">Data Sources</a>
    </li>
    <li>
      <a href="../articles/GBLandingsByLength.html">Landings by Length</a>
    </li>
    <li>
      <a href="../articles/GBLandingsByAge.html">Landings by Age</a>
    </li>
    <li>
      <a href="../articles/GBLengthWeight.html">Length Weight Relationships</a>
    </li>
    <li>
      <a href="../articles/GBbiomassNumbyLength.html">Survey Biomass and Abundance</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/NOAA-EDAB/ms-keyrun/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="GBLandingLengthDataSources_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Landings and Length data sources</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-EDAB/ms-keyrun/blob/HEAD/vignettes/GBLandingLengthDataSources.Rmd" class="external-link"><code>vignettes/GBLandingLengthDataSources.Rmd</code></a></small>
      <div class="hidden name"><code>GBLandingLengthDataSources.Rmd</code></div>

    </div>

    
    
<p>All length and landings data were pulled from the NEFSC commerical fisheries database. Specifically the stockeff.mv_cf_len and mv_cf_landings (since <code>comlandr</code> doesn’t currently pull data in format required for mscatch. Ultimately the data will be pulled using the <code>comlandr</code> package). The data were saved as rda files in the <code>data</code> folder as:</p>
<ul>
<li>sampleData_itis_GB - for landings data</li>
<li>sampleLengths_itis_GB - for length data</li>
</ul>
<p>where <code>itis</code> is the <a href="stockAreas.html#focal">species</a> specific itis code</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">channel</span> <span class="op">&lt;-</span> <span class="fu">dbutils</span><span class="fu">::</span><span class="fu"><a href="https://andybeet.github.io/dbutils/reference/connect_to_database.html" class="external-link">connect_to_database</a></span><span class="op">(</span><span class="st">"server"</span>,<span class="st">"user"</span><span class="op">)</span></span>
<span><span class="fu">test_mscatch_data_pull_hydra_GB</span><span class="op">(</span><span class="va">channel</span><span class="op">)</span></span></code></pre></div>
<p>The footprint used to pull the landings and length data were the statistical areas 521, 522, 523, 524, 525, 526, 538, 551, 552, 561, 562, 537 which comprise <a href="GBFleetDefinitions.html#spatial-extent">Georges Bank</a>.</p>
<p>Herring and winter Skate were handled differently due to data availability.</p>
<p>Note that discards are not included in the sampleData (with the exception of Herring). This will be included at a later date.</p>
<div class="section level2">
<h2 id="herring">Herring<a class="anchor" aria-label="anchor" href="#herring"></a>
</h2>
<p>Herring data is poorly represented in NEFSC fisheries database so all landings and length data were pulled from the state of Maine. In the state of Maine database catch is reported in metric tons. This was converted to lbs to align with NEFSC commercial fisheries data base. Fish lengths are reported in mm. These were converted to cm to align with the NEFSC survey database</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">get_herring_data</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">format_herring_data</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="winter-skate">Winter Skate<a class="anchor" aria-label="anchor" href="#winter-skate"></a>
</h2>
<p>No skate species are recorded in the NEFSC commercial fisheries database. All species are recorded as an unclassified skate. The package <code>comlandr</code> calculates the proportions of skate species in the surveys and applies them to the commercial landings to obtain estimates of winter skate. The lengths for winter skate were pulled from the bottom trawl survey.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1"></a>get_skate_data()</span>
<span id="cb3-2"><a href="#cb3-2"></a>format_skate_data()</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="function">Landings by length and age<a class="anchor" aria-label="anchor" href="#function"></a>
</h2>
<p>The <a href="../reference/realFisheryLencomp.html">landing by length</a> and the <a href="../reference/realFisheryAgecomp.html">landings by age</a> data were created using the function</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">channel</span> <span class="op">&lt;-</span> <span class="fu">dbutils</span><span class="fu">::</span><span class="fu"><a href="https://andybeet.github.io/dbutils/reference/connect_to_database.html" class="external-link">connect_to_database</a></span><span class="op">(</span><span class="st">"server"</span>,<span class="st">"user"</span><span class="op">)</span></span>
<span><span class="fu">make_species_datasets_for_mskeyrun</span><span class="op">(</span><span class="va">channel</span><span class="op">)</span></span></code></pre></div>
<p>For each species in turn and according to their <a href="GBLandingsByLength.html#rules">specific rules</a>:</p>
<ul>
<li>Landings and length data are used to aggregate the landings. During this stage diagnostic plots and a log file of decisions are created.</li>
<li>Length-weight data are pulled from the survey database for fitting length-weight relationships</li>
<li>The landings are then expanded to length compositions from which <code><a href="../reference/realFisheryLencomp.html">mskeyrun::realFisheryLencomp</a></code> is created</li>
<li>Age length data is pulled from both the survey database and the commercial database and used to create age-length keys</li>
<li>Numbers at age are calculated based on previous steps from which <code><a href="../reference/realFisheryAgecomp.html">mskeyrun::realFisheryAgecomp</a></code> is created</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Andy Beet, Sean Lucey, Sarah Gaichas, Kiersten Curti.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
