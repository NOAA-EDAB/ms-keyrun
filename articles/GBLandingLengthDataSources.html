<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mskeyrun">
<title>Landings and Length data sources • mskeyrun</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Landings and Length data sources">
<meta property="og:description" content="mskeyrun">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mskeyrun</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/mskeyrun.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Data Needs</h6>
    <a class="dropdown-item" href="../articles/DataNeeds.html">Project outline</a>
    <a class="dropdown-item" href="../articles/DatasetDimensions.html">Dataset Dimensions</a>
    <a class="dropdown-item" href="../articles/SpeciesEnvDat.html">Keyrun Species, Environment, Data Formats</a>
    <a class="dropdown-item" href="../articles/CompsDat.html">Age, Length, Diet</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Georges Bank</h6>
    <a class="dropdown-item" href="../articles/GBSurveySet.html">GB Survey Footprint</a>
    <a class="dropdown-item" href="../articles/allocateLandingsEPU.html">Allocate Landings to GB</a>
    <a class="dropdown-item" href="../articles/stockAreas.html">Stock areas</a>
    <a class="dropdown-item" href="../articles/GBsurveycatchviz.html">Focal species biomass and catch on GB</a>
    <a class="dropdown-item" href="../articles/GBdietcomp.html">Focal species diets on GB</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Simulated Data</h6>
    <a class="dropdown-item" href="../articles/SimData.html">Generating Simulated Data</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Assigning Fleets</h6>
    <a class="dropdown-item" href="../articles/GBFleetDefinitions.html">Analysis of catch by gear</a>
    <a class="dropdown-item" href="../articles/GBFleetDecisions.html">Fleet Definitions</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Length &amp; Age Based Data</h6>
    <a class="dropdown-item" href="../articles/GBLandingLengthDataSources.html">Data Sources</a>
    <a class="dropdown-item" href="../articles/GBLandingsByLength.html">Landings by Length</a>
    <a class="dropdown-item" href="../articles/GBLandingsByAge.html">Landings by Age</a>
    <a class="dropdown-item" href="../articles/GBLengthWeight.html">Length Weight Relationships</a>
    <a class="dropdown-item" href="../articles/GBbiomassNumbyLength.html">Survey Biomass and Abundance</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/NOAA-EDAB/ms-keyrun/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Landings and Length data sources</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-EDAB/ms-keyrun/blob/HEAD/vignettes/GBLandingLengthDataSources.Rmd" class="external-link"><code>vignettes/GBLandingLengthDataSources.Rmd</code></a></small>
      <div class="d-none name"><code>GBLandingLengthDataSources.Rmd</code></div>
    </div>

    
    
<p>All length and landings data were pulled from the NEFSC commerical
fisheries database. Specifically the stockeff.mv_cf_len and
mv_cf_landings (since <code>comlandr</code> doesn’t currently pull data
in format required for mscatch. Ultimately the data will be pulled using
the <code>comlandr</code> package). The data were saved as rda files in
the <code>data</code> folder as:</p>
<ul>
<li>sampleData_itis_GB - for landings data</li>
<li>sampleLengths_itis_GB - for length data</li>
</ul>
<p>where <code>itis</code> is the <a href="stockAreas.html#focal">species</a> specific itis code</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">channel</span> <span class="op">&lt;-</span> <span class="fu">dbutils</span><span class="fu">::</span><span class="fu"><a href="https://andybeet.github.io/dbutils/reference/connect_to_database.html" class="external-link">connect_to_database</a></span><span class="op">(</span><span class="st">"server"</span>,<span class="st">"user"</span><span class="op">)</span></span>
<span><span class="fu">test_mscatch_data_pull_hydra_GB</span><span class="op">(</span><span class="va">channel</span><span class="op">)</span></span></code></pre></div>
<p>The footprint used to pull the landings and length data were the
statistical areas 521, 522, 523, 524, 525, 526, 538, 551, 552, 561, 562,
537 which comprise <a href="GBFleetDefinitions.html#spatial-extent">Georges Bank</a>.</p>
<p>Herring and winter Skate were handled differently due to data
availability.</p>
<p>Note that discards are not included in the sampleData (with the
exception of Herring). This will be included at a later date.</p>
<div class="section level2">
<h2 id="herring">Herring<a class="anchor" aria-label="anchor" href="#herring"></a>
</h2>
<p>Herring data is poorly represented in NEFSC fisheries database so all
landings and length data were pulled from the state of Maine. In the
state of Maine database catch is reported in metric tons. This was
converted to lbs to align with NEFSC commercial fisheries data base.
Fish lengths are reported in mm. These were converted to cm to align
with the NEFSC survey database</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">get_herring_data</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">format_herring_data</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="winter-skate">Winter Skate<a class="anchor" aria-label="anchor" href="#winter-skate"></a>
</h2>
<p>No skate species are recorded in the NEFSC commercial fisheries
database. All species are recorded as an unclassified skate. The package
<code>comlandr</code> calculates the proportions of skate species in the
surveys and applies them to the commercial landings to obtain estimates
of winter skate. The lengths for winter skate were pulled from the
bottom trawl survey.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>get_skate_data()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>format_skate_data()</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="function">Landings by length and age<a class="anchor" aria-label="anchor" href="#function"></a>
</h2>
<p>The <a href="../reference/realFisheryLencomp.html">landing by
length</a> and the <a href="../reference/realFisheryAgecomp.html">landings by age</a> data
were created using the function</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">channel</span> <span class="op">&lt;-</span> <span class="fu">dbutils</span><span class="fu">::</span><span class="fu"><a href="https://andybeet.github.io/dbutils/reference/connect_to_database.html" class="external-link">connect_to_database</a></span><span class="op">(</span><span class="st">"server"</span>,<span class="st">"user"</span><span class="op">)</span></span>
<span><span class="fu">make_species_datasets_for_mskeyrun</span><span class="op">(</span><span class="va">channel</span><span class="op">)</span></span></code></pre></div>
<p>For each species in turn and according to their <a href="GBLandingsByLength.html#rules">specific rules</a>:</p>
<ul>
<li>Landings and length data are used to aggregate the landings. During
this stage diagnostic plots and a log file of decisions are
created.</li>
<li>Length-weight data are pulled from the survey database for fitting
length-weight relationships</li>
<li>The landings are then expanded to length compositions from which
<code><a href="../reference/realFisheryLencomp.html">mskeyrun::realFisheryLencomp</a></code> is created</li>
<li>Age length data is pulled from both the survey database and the
commercial database and used to create age-length keys</li>
<li>Numbers at age are calculated based on previous steps from which
<code><a href="../reference/realFisheryAgecomp.html">mskeyrun::realFisheryAgecomp</a></code> is created</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Andy Beet, Sean Lucey, Sarah Gaichas, Kiersten Curti.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
